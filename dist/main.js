!function(){"use strict";function c(e,t){var n=document.createElement(e||"div");for(var o in t){var i=t[o];if(null!=i)if("dataset"===o)for(var l in i){var a=i[l];null!=a&&(n.dataset[l]=a)}else if("style"===o)if("string"==typeof i)n.style.cssText=i;else for(var r in i){var d=i[r];null!=d&&(n.style[r]=d)}else o in n||"function"==typeof i?!0===(n[o]=i)&&n.setAttribute(o.toLowerCase(),""):n.setAttribute(o,i)}for(var u=arguments.length,s=new Array(2<u?u-2:0),c=2;c<u;c++)s[c-2]=arguments[c];return function t(n,e){e.forEach(function(e){null!=e&&(e.nodeType?n.appendChild(e):"string"==typeof e||"number"==typeof e?n.appendChild(document.createTextNode(e)):e.length&&t(n,e))})}(n,s),n}var r=1;function p(e,t){if(e.nodeType===t.nodeType)if(e.nodeType===r){if(i=t,l=(o=e).getAttribute("data-domsame"),a=i.getAttribute("data-domsame"),l&&a&&l===a||i.isSameNode(o))return;if(function(e,t){var n={},o=e.firstChild;for(;o;){var i=o;o=o.nextSibling;var l=h(i);l&&(n[l]=i)}o=e.firstChild;var a=t.firstChild,r=0;for(;a;){r+=1;var d=a;a=a.nextSibling;var u=h(d),s=u?n[u]:null;if(s)delete n[u],s===o?o=o.nextSibling:e.insertBefore(s,o),p(s,d);else if(o){var c=o;o=o.nextSibling,m(n,c)?e.insertBefore(d,c):p(c,d)}else e.appendChild(d)}for(var f in n)e.removeChild(n[f]);var v=e.childNodes.length-r;for(;0<=--v;)e.removeChild(e.lastChild)}(e,t),e.nodeName===t.nodeName)!function(e,t){for(var n=e.attributes,o=n.length-1;0<=o;o-=1){var i=n[o],l=i.namespaceURI,a=i.localName;t.hasAttributeNS(l,a)||e.removeAttributeNS(l,a)}for(var r=t.attributes,d=r.length-1;0<=d;d-=1){var u=r[d],s=u.namespaceURI,c=u.localName,f=t.getAttributeNS(s,c),v=e.getAttributeNS(s,c);f!==v&&e.setAttributeNS(s,c,f)}var p=e.nodeName;if("INPUT"===p){g(e,t,"checked"),g(e,t,"disabled"),g(e,t,"readOnly");var h=t.value;e.value!==h&&(e.value=h),t.hasAttributeNS(null,"value")||e.removeAttribute("value")}else if("TEXTAREA"===p){g(e,t,"disabled"),g(e,t,"readOnly");var m=t.value;e.value!==m&&(e.value=m)}else"OPTION"===p?(g(e,t,"selected"),g(e,t,"disabled")):"SELECT"===p&&g(e,t,"disabled")}(e,t);else{for(var n=t.cloneNode();e.firstChild;)n.appendChild(e.firstChild);e.parentNode.replaceChild(n,e)}}else e.nodeValue!==t.nodeValue&&(e.nodeValue=t.nodeValue);else e.parentNode.replaceChild(t,e);var o,i,l,a}function g(e,t,n){e[n]!==t[n]&&(e[n]=t[n],e[n]?e.setAttribute(n.toLowerCase(),""):e.removeAttribute(n.toLowerCase()))}function h(e){if(e.nodeType===r)return e.getAttribute("data-domkey")}function m(e,t){for(var n in e)if(e[n]===t)return!0;return!1}var f={all:function(e){return e},active:function(e){return e.filter(function(e){return!e.done})},done:function(e){return e.filter(function(e){return e.done})}};function v(e,t,n){if(e.target.dataset.editing){var o=e.target.value,i=o&&o.trim();i?t.emit("update",{todo:n,title:i}):t.emit("remove",{todo:n})}}var b,o,i,n,e=window.localStorage,t="js-todo";!function(t,n,o){n.on("add",function(e){t.add(e.title),o(t,n)}).on("update",function(e){t.update(e.todo,e.title),t.editTodo=null,o(t,n)}).on("remove",function(e){t.remove(e.todo),t.editTodo=null,o(t,n)}).on("removeDones",function(){t.removeDones(),o(t,n)}).on("toggle",function(e){t.toggle(e.todo),o(t,n)}).on("toggleAll",function(){t.toggleAll(),o(t,n)}).on("startEdit",function(e){t.editTodo=e.todo,o(t,n)}).on("cancelEdit",function(){t.editTodo=null,o(t,n)});var i,l,a,e=(i=t,l=n,a=o,function(){var e=window.location.hash.replace(/#\/?/,"");f[e]?i.visibility=e:(window.location.hash="",i.visibility="all"),a(i,l)});window.addEventListener("hashchange",e),t.load(),e()}(n={todos:[],editTodo:null,visibility:null,load:function(){n.todos=JSON.parse(e.getItem(t)||"[]")},save:function(){e.setItem(t,JSON.stringify(n.todos))},add:function(e){var t=e&&e.trim();t&&(n.todos.push({id:Date.now(),title:t,done:!1}),n.save())},update:function(e,t){t&&(e.title=t,n.save())},remove:function(t){n.todos=n.todos.filter(function(e){return e.id!==t.id}),n.save()},removeDones:function(){n.todos=f.active(n.todos),n.save()},toggle:function(e){e.done=!e.done,n.save()},toggleAll:function(){var t=f.done(n.todos).length===n.todos.length;n.todos.forEach(function(e){return e.done=!t}),n.save()}},(o=Object.create(null),i={on:function(e,t){return o[e]||(o[e]=[]),o[e].push(t),i},off:function(e,t){if(o[e])if(null==t)o[e]=[];else{var n=o[e].indexOf(t);0<=n&&o[e].splice(n,1)}return i},emit:function(e,t){return o[e]&&o[e].forEach(function(e){return e(t)}),i}}),(b=document.getElementById("app"),function(e,t){var n,a,o,i,l,r,d,u=(a=t,o=(n=e).todos,i=n.editTodo,l=n.visibility,r=f.active(o).length,d=f[l](o),c("div",{class:"panel"},c("div",{class:"panel-heading"},"Todos"),c("div",{class:"panel-block","data-domsame":"newTodo"},c("input",{class:"input",type:"text",placeholder:"What needs to be done?",autofocus:!0,onkeyup:function(e){return function(e,t){if("Enter"===e.key){var n=e.target.value;e.target.value="",t.emit("add",{title:n})}}(e,a)}})),c("div",{class:"panel-tabs"},c("a",{class:"all"===l?"is-active":null,href:"#/all"},"All"),c("a",{class:"active"===l?"is-active":null,href:"#/active"},"Active"),c("a",{class:"done"===l?"is-active":null,href:"#/done"},"Done")),c("label",{class:"panel-block",style:o.length?null:"display:none"},c("input",{type:"checkbox",checked:o.every(function(e){return e.done}),onchange:function(){return a.emit("toggleAll")}}),"Mark all as done"),d.map(function(l){return c("div",{class:"panel-block todo-item","data-domkey":"todo-"+l.id},c("div",{style:l!==i?null:"display:none"},c("input",{type:"checkbox",checked:l.done,onchange:function(){return a.emit("toggle",{todo:l})}}),c("label",{class:"todo"+(l.done?" done":""),ondblclick:function(){return a.emit("startEdit",{todo:l})}},l.title)),c("button",{class:"delete",style:l!==i?null:"display:none",onclick:function(){return a.emit("remove",{todo:l})}}),c("input",{class:"input",style:l===i?null:"display:none",type:"text",value:i?i.title:null,"data-editing":l===i?"*":null,onblur:function(e){return v(e,a,l)},onkeyup:function(e){return n=a,o=l,void("Enter"===(i=(t=e).key)?v(t,n,o):"Escape"!==i&&"Esc"!==i||n.emit("cancelEdit",{}));var t,n,o,i}}))}),c("div",{class:"panel-block",style:o.length?null:"display:none"},c("strong",null,r),1===r?" item left":" items left"),c("div",{class:"panel-block",style:o.length>r?null:"display:none"},c("button",{class:"button is-link is-fullwidth",onclick:function(){return a.emit("removeDones")}},"Clear done")))),s=b.lastChild;s?p(s,u):b.appendChild(u)}))}();
