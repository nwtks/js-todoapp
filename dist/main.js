!function(t){var n={};function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:o})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)e.d(o,r,function(n){return t[n]}.bind(null,r));return o},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=5)}([function(t,n,e){"use strict";function o(t,n){Array.isArray(n)?n.forEach(function(n){return o(t,n)}):t.push(n)}t.exports=function(t,n){for(var e=[],r=arguments,i=2;i<r.length;i+=1)o(e,r[i]);return"function"==typeof t?t(n||{},e):{name:t||"div",attrs:n||{},children:e.filter(function(t){return null!=t})}}},function(t,n,e){"use strict";t.exports=function(){var t=Object.create(null),n={on:function(e,o){return t[e]||(t[e]=[]),t[e].push(o),n},off:function(e,o){if(t[e])if(null==o)t[e]=[];else{var r=t[e].indexOf(o);r>=0&&t[e].splice(r,1)}return n},emit:function(e,o){return t[e]&&t[e].forEach(function(t){return t(o)}),n}};return n}},function(t,n,e){"use strict";var o=window.location;function r(t){var n=t.tos,e=t.other,r=o.hash;if(t.path=r,r){var i=r.split("/");if(i.length)for(var u=0;u<n.length;u+=1){var l=n[u],a=l.path;if(i.length===a.length){for(var c=Object.create(null),d=!0,f=0;f<a.length;f+=1){var s=a[f];if(":"===s[0])c[s.substring(1)]=i[f];else if(s!==i[f]){d=!1;break}}if(d)return void l.to(c,v)}}}function v(n){t.render=n,t.render()}e({},v)}t.exports=function(){var t={path:null,render:null,tos:[],other:null,lstnr:null,route:function(n,e){return n&&e&&("*"===n?t.other=e:t.tos.push({path:n.split("/"),to:e})),t},redirect:function(t){o.hash=t},start:function(){t.lstnr=function(){return r(t)},window.addEventListener("hashchange",t.lstnr),r(t)},stop:function(){window.removeEventListener("hashchange",t.lstnr),t.lstnr=null}};return t}},function(t,n,e){"use strict";t.exports=function(){var t=!1,n=null;return function(e){n=e,t||(t=!0,window.requestAnimationFrame(function(){t=!1,n&&n(),n=null}))}}},function(t,n,e){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=1,i=3,u=Array.isArray;function l(t,n){if("TEXTAREA"!==t.nodeName){var e=function(t,n){var e=[];n.forEach(function(t){t&&t.attrs&&t.attrs.domkey&&e.push(t.attrs.domkey)});for(var o=Object.create(null),r=t.firstChild;r;r=r.nextSibling){var i=v(r);i&&(e.indexOf(i)>=0?o[i]=r:m(t,r))}return o}(t,n),r=t.firstChild;n.forEach(function(n){var u=o(n);"string"===u||"number"===u?r=function(t,n,e){n?n.nodeType===i?(n.nodeValue!==e&&(n.nodeValue=e),n=n.nextSibling):h(t,y(e),n):p(t,y(e));return n}(t,r,""+n):function(t){return t&&t.name&&t.attrs&&t.children}(n)&&(r=function(t,n,e,o){var r=o.attrs.domkey,i=r?e[r]:null;if(i)delete e[r],c(i,o.attrs),l(i,o.children),i===n?n=n.nextSibling:h(t,i,n);else if(n)if(r)h(t,a(o),n);else for(;;){if(!n){p(t,a(o));break}if(!b(e,n)){s(n,o)?(c(n,o.attrs),l(n,o.children),n=n.nextSibling):h(t,a(o),n);break}n=n.nextSibling}else p(t,a(o));return n}(t,r,e,n))}),function(t,n){for(var e in n)m(t,n[e])}(t,e),function(t,n){for(var e=t.childNodes.length-n.length;e>0;--e)m(t,t.lastChild)}(t,n)}}function a(t){var n=document.createElement(t.name);return c(n,t.attrs),l(n,t.children),n}function c(t,n){!function(t,n){for(var e=t.attributes,o=e.length-1;o>=0;--o){var r=e[o],i=r.name;n.hasOwnProperty(i)&&null!=n[i]||g(t,i)}}(t,n),Object.getOwnPropertyNames(n).forEach(function(e){return function(t,n,e){var r=o(e);"style"===n?d(t,n,e):n in t?(k(t,n,e),f(t,n.toLowerCase(),e)):"function"===r||"o"===n[0]&&"n"===n[1]?k(t,n,e):"boolean"===r?f(t,n,e):d(t,n,e)}(t,e,n[e])}),function(t,n){var e=t.nodeName,o=null==n.value?"":""+n.value,r=!!n.checked,i=!!n.selected;"INPUT"===e?(k(t,"checked",r),f(t,"checked",r),k(t,"value",o),d(t,"value",n.value)):"TEXTAREA"===e?k(t,"value",o):"OPTION"===e&&(k(t,"selected",i),f(t,"selected",i))}(t,n)}function d(t,n,e){null==e?g(t,n):e!==t.getAttribute(n)&&t.setAttribute(n,e)}function f(t,n,e){!0===e?d(t,n,""):!1===e&&g(t,n)}function s(t,n){return t.nodeType===r&&t.nodeName.toLowerCase()===n.name.toLowerCase()}function v(t){if(t.nodeType===r)return t.getAttribute("domkey")}function p(t,n){t.appendChild(n)}function h(t,n,e){t.insertBefore(n,e)}function m(t,n){t.removeChild(n)}function y(t){return document.createTextNode(t)}function g(t,n){t.removeAttribute(n)}function b(t,n){for(var e in t)if(t[e]===n)return!0;return!1}function k(t,n,e){e!==t[n]&&(t[n]=e)}t.exports=function(t,n){u(n)?l(t,n):null!=n?l(t,[n]):function(t){for(var n=t.lastChild;n;n=t.lastChild)m(t,n)}(t)}},function(t,n,e){"use strict";e.r(n);var o=e(1),r=e.n(o),i=e(2),u=e.n(i),l=e(3),a=e.n(l),c=e(4),d=e.n(c),f={all:function(t){return t},active:function(t){return t.filter(function(t){return!t.done})},done:function(t){return t.filter(function(t){return t.done})}},s=window.localStorage,v="js-todoapp";var p=function(){var t={todos:[],editTodo:null,newTodo:null,load:function(){t.todos=JSON.parse(s.getItem(v)||"[]")},save:function(){s.setItem(v,JSON.stringify(t.todos))},add:function(n){var e=n&&n.trim();e&&(t.todos.push({id:Date.now(),title:e,done:!1}),t.save())},update:function(n,e){e&&(n.title=e,t.save())},remove:function(n){t.todos=t.todos.filter(function(t){return t.id!==n.id}),t.save()},removeDones:function(){t.todos=f.active(t.todos),t.save()},toggle:function(n){n.done=!n.done,t.save()},toggleAll:function(){var n=f.done(t.todos).length===t.todos.length;t.todos.forEach(function(t){return t.done=!n}),t.save()}};return t},h=e(0),m=e.n(h),y=["all","active","done"];function g(t){var n=t.emit,e=t.todo,o=t.editTodo;return m()("div",{domkey:"todo-"+e.id,class:"panel-block todo-item"},m()("div",{style:k(e!==o)},m()("input",{type:"checkbox",checked:e.done,onchange:function(){return n("toggle",{todo:e})}}),m()("label",{class:"todo"+(e.done?" done":""),ondblclick:function(){return n("startEdit",{todo:e})}},e.title)),m()("button",{class:"delete",style:k(e!==o),onclick:function(){return n("remove",{todo:e})}}),m()("input",{class:"input",style:k(e===o),type:"text",value:o?o.title:null,"data-editing":e===o?"*":null,onblur:function(t){return b(t,n,e)},onkeydown:function(t){return function(t,n,e){var o=t.key;"Enter"===o?b(t,n,e):"Escape"!==o&&"Esc"!==o||n("cancelEdit",{})}(t,n,e)}}))}function b(t,n,e){if(t.target.dataset.editing){var o=t.target.value,r=o&&o.trim();r?n("update",{todo:e,title:r}):n("remove",{todo:e})}}function k(t){return t?"":"display:none"}var w=function(t){var n=t.emit,e=t.state,o=e.todos,r=e.editTodo,i=e.newTodo,u=e.visibility,l=f.active(o).length,a=f[u](o);return m()("div",{class:"panel"},m()("div",{class:"panel-heading has-background-info has-text-light"},"Todos"),m()("div",{domkey:"new-todo",class:"panel-block"},m()("input",{class:"input",type:"text",value:i,placeholder:"What needs to be done?",autofocus:!0,onkeydown:function(t){return function(t,n){if("Enter"===t.key){var e=t.target.value;t.target.value="",n("add",{title:e})}}(t,n)},oninput:function(t){return n("inputNew",{title:t.target.value})}})),m()("div",{domkey:"nav",class:"panel-tabs"},y.map(function(t){return m()("a",{class:"is-capitalized"+(u===t?" is-active":""),href:"#/"+t},t)})),m()("label",{domkey:"mark-all",class:"panel-block",style:k(o.length)},m()("input",{type:"checkbox",checked:o.every(function(t){return t.done}),onchange:function(){return n("toggleAll")}}),"Mark all as done"),a.map(function(t){return m()(g,{todo:t,emit:n,editTodo:r})}),m()("div",{domkey:"status",class:"panel-block",style:k(o.length)},m()("strong",null,l),1===l?" item":" items"," left"),m()("div",{domkey:"remove-dones",class:"panel-block",style:k(o.length>l)},m()("button",{class:"button is-primary is-fullwidth",onclick:function(){return n("removeDones")}},"Clear done")))};var T=function(t,n,e){var o=p();n.on("add",function(t){o.add(t.title),o.newTodo=null,e.render()}).on("update",function(t){o.update(t.todo,t.title),o.editTodo=null,e.render()}).on("remove",function(t){o.remove(t.todo),o.editTodo=null,e.render()}).on("removeDones",function(){o.removeDones(),e.render()}).on("toggle",function(t){o.toggle(t.todo),e.render()}).on("toggleAll",function(){o.toggleAll(),e.render()}).on("startEdit",function(t){o.editTodo=t.todo,e.render()}).on("cancelEdit",function(){o.editTodo=null,e.render()}).on("inputNew",function(t){o.newTodo=t.title}),e.route("#/:vis",function(n,r){return f[n.vis]?r(function(){return t(w,{todos:o.todos,editTodo:o.editTodo,newTodo:o.newTodo,visibility:n.vis})}):e.redirect("#/all")}).route("*",function(){return e.redirect("#/all")}),o.load(),e.start()},x=r()(),E=u()(),O=a()(),S=document.getElementById("app");T(function(t,n){O(function(){return d()(S,t({state:n,emit:x.emit}))})},x,E)}]);